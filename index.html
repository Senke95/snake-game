<!doctype html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Snake</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-orb orb-a" aria-hidden="true"></div>
  <div class="bg-orb orb-b" aria-hidden="true"></div>

  <main class="layout">
    <section class="card game-card" aria-label="Snake spelpanel">
      <header class="panel-header">
        <h1>Snake</h1>
        <p>Pilar eller WASD. Space: pausa. Enter: starta. R: starta om.</p>
        <p class="mobile-tip">Mobil: svep på spelplanen eller använd knapparna under.</p>
      </header>

      <section class="hud-row" aria-label="Speldata">
        <div class="hud-item"><span>Poäng</span><strong id="score">0</strong></div>
        <div class="hud-item"><span>Högsta</span><strong id="high-score">0</strong></div>
        <div class="hud-item"><span>Hastighet</span><strong id="speed">1.0x</strong></div>
      </section>

      <section class="control-row" aria-label="Spelkontroller">
        <button id="start-btn" class="btn btn-primary" type="button">Starta</button>
        <button id="pause-btn" class="btn" type="button">Pausa</button>
        <button id="restart-btn" class="btn" type="button">Starta om</button>
        <label class="toggle" for="sound-toggle">
          <input id="sound-toggle" type="checkbox" checked />
          <span>Ljud</span>
        </label>
        <label class="toggle" for="effects-toggle">
          <input id="effects-toggle" type="checkbox" checked />
          <span>Effekter</span>
        </label>
      </section>

      <section class="canvas-stage" aria-label="Spelyta">
        <div class="canvas-wrap">
          <canvas id="game" width="640" height="640" aria-label="Snake spel"></canvas>
        </div>
        <p id="sr-status" class="sr-only" aria-live="polite">Tryck Enter för att starta</p>
      </section>

      <section class="dpad" aria-label="Mobilkontroller">
        <button type="button" class="dpad-btn up" data-dir="up" aria-label="Upp">&#9650;</button>
        <button type="button" class="dpad-btn left" data-dir="left" aria-label="Vänster">&#9664;</button>
        <button type="button" class="dpad-btn right" data-dir="right" aria-label="Höger">&#9654;</button>
        <button type="button" class="dpad-btn down" data-dir="down" aria-label="Ner">&#9660;</button>
      </section>
    </section>

    <aside class="card leaderboard-card" aria-label="Topplista">
      <header class="panel-header compact">
        <h2>Topplista</h2>
        <p>Topp 5 spelare globalt.</p>
      </header>
      <section class="record-strip" aria-label="Nuvarande rekord">
        <div class="record-icon" aria-hidden="true"></div>
        <div class="record-copy">
          <span>Rekord</span>
          <strong id="record-score">0</strong>
        </div>
      </section>
      <section class="leaderboard-list-wrap">
        <ol id="leaderboard-list" class="leaderboard-list" aria-live="polite"></ol>
        <div id="leaderboard-empty" class="leaderboard-empty" hidden>
          <h3>Inga scores ännu</h3>
          <p>Bli den första att sätta rekordet.</p>
        </div>
      </section>
      <section id="leaderboard-motivation" class="leaderboard-motivation" hidden>
        <p class="motivation-main">Slå rekordet: <strong id="motivation-record">0</strong></p>
        <p class="motivation-tip">Tips: håll dig nära mitten när hastigheten ökar.</p>
      </section>
      <footer class="leaderboard-footer">
        <p id="leaderboard-state" class="leaderboard-state">Laddar topplista...</p>
        <p id="leaderboard-notice" class="leaderboard-notice" role="status" aria-live="polite"></p>
        <p id="api-status" class="api-status" aria-live="polite">API: kontrollerar...</p>
        <p id="api-status-detail" class="api-status-detail" aria-live="polite"></p>
      </footer>
    </aside>
  </main>

  <div id="name-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="name-modal-title" aria-hidden="true">
    <div class="modal-card">
      <h3 id="name-modal-title">Skriv ditt namn</h3>
      <p id="name-modal-info">Din poäng kan sparas i topplistan.</p>
      <form id="name-form" novalidate>
        <label for="player-name" class="sr-only">Ditt namn</label>
        <input id="player-name" name="playerName" type="text" maxlength="16" placeholder="Ditt namn" autocomplete="nickname" />
        <p id="name-error" class="name-error" aria-live="polite"></p>
        <div class="modal-actions">
          <button id="save-name-btn" class="btn btn-primary" type="submit">Spara</button>
          <button id="cancel-name-btn" class="btn" type="button">Avbryt</button>
        </div>
      </form>
    </div>
  </div>

  <canvas id="confetti" aria-hidden="true"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.4/dist/confetti.browser.js"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
